<script>
    $(document).ready(function() {
        $("#theliagooglemap-success-msg").hide();
        $("#theliagooglemap-form").on("submit", function(e, data){
            e.preventDefault();
            var form = $(this);

            $('body').append('<div class="modal-backdrop fade in" id="loading-event"><div class="loading"></div></div>');

            $.ajax({
                url: form.attr('action'),
                type: form.attr('method'),
                data: form.serialize()
            }).done(function(){
                $("#loading-event").remove();
            })
                    .success(function(data) {
                        if (data.error != 0) {
                            $("#loading-event").remove();
                            $('#theliagooglemap-failed-body').html(data.message);
                            $("#theliagooglemap-failed").modal("show");
                        }else{
                            $("#theliagooglemap-success-msg").html(data.message).show()
                        }
                    })
                    .fail(function(jqXHR, textStatus, errorThrown){
                        $("#loading-event").remove();
                        $('#theliagooglemap-failed-body').html(jqXHR.responseJSON.message);
                        $("#theliagooglemap-failed").modal("show");
                    });

        });
    });
</script>